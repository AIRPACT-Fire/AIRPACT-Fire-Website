{% extends "base/newbase.html" %}
{% block airpact-content %}
{% load index_tag %}

<head>
  {{ form.media }}
</head>

<div class="col-lg-12" style="padding-bottom: 1em;">
  <div id = "menu">
  	<p><button type="submit" class="btn btn-info" >Search Options</button></p>
  </div>

  <div id = "collapsible" style="display:none">
  	<div class="col-lg-12" style="padding-bottom: 5px;">
  		<form class="form-inline" method="POST" id = "search_form">
  		Search by: <br/>
  			{% csrf_token %}
  			<div class="form-group">
  			{{ form.as_p }}
  		<button type="submit" class="btn btn-default" id = "search_submit"> Search </button>
  		</form>
    	</div>
    </div>
  </div>
</div>

	{% for picture in pictures %}
		<div class="col-xs-6 col-md-4 col-lg-2">
      <div class="thumbnail">
        <img style="width: 100%;" src="{{ picture.thumbnail.url }}"
          alt="{{ picture.url }}" />
        <div class="caption">
          <h3>{{ tags|index_tag:forloop.counter0 }}</h3>
          <p>
            <span class="label label-default">
              <strong>Estimated visual range:</strong> {{ picture.eVisualRange }} KM
            </span>
            <span class="label label-primary">
              <strong>Computed visual range:</strong> 0.0 KM
            </span>
          </p>
          <p><strong>Description:</strong> {{ picture.description }}</p>
          <p><small>Posted by <a href="#">{{ picture.user }}</a> on {{ picture.uploadTime }}.</small></p>
          <p>
            <a href="{% url 'view_picture' picId=picture.id %}"
              class="btn btn-primary" role="button">View details</a>
            <a href="#" class="btn btn-default"
            role="button">Similar posts</a>
          </p>
        </div>
      </div>
    </div>

    <!--
			<a href="{% url 'view_picture' picId=picture.id %}">
        <img style="width: 100%;" class="img-thumbnail" src="{{ picture.thumbnail.url }}" alt="{{ picture.url}}" />
      </a>
			<div>
        <br />
				<article><b>Date</b>: {{ picture.uploadTime }} </article>
				<div><b>Estimated VR</b>: {{ picture.eVisualRange }} </div>
				<article><b>Uploaded by</b>: <a href="{% url 'view_profile' name=picture.user %}"> {{ picture.user }} </a> </article>
        <br />
			</div>
		</div>
    -->
	{% endfor %}

	<div class= "col-lg-24;">
		<ul class="pagination" style="display: table; margin: 0 auto;">
			{% if pictures.paginator.num_pages > 1 %}
				{% for num in pictures.paginator.page_range %}
					{% if pictures.number == num %}
						<li class="active pagination_submit"> <a href="" > {{ num }} </a> </li>
					{% else %}
						<li> <button class = "pagination_submit"> {{ num }} </button> </li>
					{% endif %}
				{% endfor %}
			{% endif %}
		</ul>
	</div>

<script>
// When num link is clicked, re-fire form submit
$(".pagination_submit").click(function() {
	page_num = $.trim($(this).text());

	$("#search_submit").on("click", function(e){
    	e.preventDefault();
    	$('#search_form').attr('action', "/gallery/" + page_num + "/").submit();
	});
	$("#search_submit").trigger("click");
});
$(function(){
	$('#date1').datepicker();
});
$(function(){
	$('#date2').datepicker();
});
$('#menu').click(function(){
    $(this).next().slideToggle();
    $(this).hide();
    return false;
});
</script>
{% endblock %}
