
{% extends "base/newbase.html" %}
{% block airpact-content %}
<head>
  {{ form.media }}
</head>

<h1 class="col-lg-24">Gallery</h1>

<div id = "menu">
	<p><button type="submit" class="btn btn-info" >Search Options</button></p>
</div>

<div id = "collapsible" style="display:none">
	<div class="col-lg-12" style="padding-bottom: 5px;"> 
		<form class="form-inline" method="POST" id = "search_form">
		Search by: <br/>
			{% csrf_token %}
			<div class="form-group">
			{{ form.as_p }}
		<button type="submit" class="btn btn-default" id = "search_submit"> Search </button>
	</div>		
		</form>
		
</div>

</div>
	{% for picture in pictures %}
		<div class="col-lg-3">
			<a href="{% url 'view_picture' picId=picture.id %}"> <img class="img-thumbnail" src="{{ picture.thumbnail.url }}" alt="{{ picture..url}}" /> </a>
			<div>
				<article> Date: {{ picture.uploaded }} </article>
				<div> VR: {{picture.vr }} </div>
				<article> uploaded by: <a href="{% url 'view_profile' name=picture.user %}"> {{ picture.user }} </a> </article>
				
			</div>
		</div>
	{% endfor %}

	<div class= "col-lg-12">
		<ul class="pagination">
			{% if pictures.paginator.num_pages > 1 %}
				{% for num in pictures.paginator.page_range %}
					{% if pictures.number == num %}
						<li class="active pagination_submit"> <a href="" > {{ num }} </a> </li>
					{% else %}
						<li> <button class = "pagination_submit">{{ num }}</button> </li>
					{% endif %}
				{% endfor %}
			{% endif %}
		</ul>
	</div>
<script>
// When num link is clicked, re-fire form submit
$(".pagination_submit").click(function() {
	page_num = $(this).text();
	
	$("#search_submit").on("click", function(e){
    	e.preventDefault();
    	$('#search_form').attr('action', "/gallery/" + page_num + "/").submit();
	});
	$("#search_submit").trigger("click");
});
$(function(){
	$('#date1').datepicker();
});
$(function(){
	$('#date2').datepicker();
});
$('#menu').click(function(){
    $(this).next().slideToggle();
    $(this).hide();
    return false;
});
</script>
{% endblock %}


